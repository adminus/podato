{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","webapp/static/jssrc/main.js","1.0.0.podato.min.js","node_modules/browserify/node_modules/events/events.js","node_modules/merge/merge.js","webapp/static/jssrc/api.js","webapp/static/jssrc/utils.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"api","window","./api.js",2,"module","EventEmitter","this","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","prototype","defaultMaxListeners","setMaxListeners","isNaN","TypeError","emit","type","er","handler","len","args","listeners","error","arguments","Array","apply","slice","addListener","listener","m","newListener","push","warned","console","trace","on","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","emitter",3,"isNode","merge_recursive","base","extend","typeOf","merge","clone","recursive","argv","result","size","index","item","sitem","Public","input","toString","toLowerCase","publicName","output",4,"utils","APIError","message","name","PodatoAPI","apiBase","client","autoRefreshAuth","_authData","_loginCallbackAttached","authenticate","auth_provider","force","isAuthenticated","client_id","scopes","authorizeEndpoint","authorize_url","encodeQueryString","redirect_uri","origin","location","scope","provider","grant_type","response_type","open","addEventListener","onMessage","bind","event","data","access_token","expires","Date","getTime","expires_in","request","options","callback","path","xhr","XMLHttpRequest","responseType","url","method","_this","sendRequest","setRequestHeader","send","onreadystatechange","readyState","requireAuthentication","getUser","user_id","./utils.js","events",5,"obj","pairs","hasOwnProperty","encodeURIComponent","join"],"mappings":"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","file":"1.0.0.podato.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var api = require(\"./api.js\");\n\nwindow.api = api;",null,"// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.0\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);","var utils = require(\"./utils.js\");\n\nvar merge = require(\"merge\");\nvar EventEmitter = require('events').EventEmitter;\n\nvar APIError = function(message){\n    this.name = \"PodatoApiError\";\n    this.message = (message || \"\");\n}\n\nAPIError.prototype = Error.prototype;\n\nvar PodatoAPI = {\n    apiBase: \"http://localhost:8080\" + \"/api\",\n\n    //configurable\n    client: {},\n    autoRefreshAuth: true,\n\n    _authData: {},\n    _loginCallbackAttached: false,\n\n    authenticate: function(auth_provider, force){\n        if (this.isAuthenticated() && !force){\n            this.emit(\"authenticated\");\n            return;\n        }\n\n        if(!this.client.client_id || !this.client.scopes) throw new APIError(\"client.client_id and client.scopes have to be defined before calling authenticate().\")\n\n        var authorizeEndpoint = this.apiBase + \"/oauth/authorize\";\n        var authorize_url = authorizeEndpoint + utils.encodeQueryString({\n            redirect_uri: this.apiBase + \"/oauth/js\" + utils.encodeQueryString({\n                origin: location.origin\n            }),\n            client_id:this.client.client_id,\n            scope: this.client.scopes,\n            provider: auth_provider,\n            grant_type: \"implicit\",\n            response_type: \"token\"\n        });\n        window.open(authorize_url, \"Log In to Podato\", \"height=200,width=200\")\n\n        if(!this._loginCallbackAttached){\n            window.addEventListener(\"message\", this.onMessage.bind(this), false);\n            this._loginCallbackAttached = true;\n        }\n    },\n\n    onMessage: function(event){\n        if (event.origin === \"http://localhost:8080\"){\n            if(event.data.access_token){\n                this._authData = event.data;\n                this._authData.expires = new Date().getTime() + this._authData.expires_in*1000;\n                this.emit(\"authenticated\");\n            }\n        }\n    },\n\n    isAuthenticated: function(){\n        return this._authData.access_token && this._authData.expires > new Date().getTime();\n    },\n\n    request: function(options, callback){\n        if(typeof options === \"string\"){\n            options = {path: options};\n        }\n        var xhr = new XMLHttpRequest();\n        xhr.responseType = options.responseType || \"json\";\n\n        if(!options.path) throw new APIError(\"options.path is required for request()\");\n        var url = this.apiBase + options.path;\n        options.method = options.method || \"GET\";\n        xhr.open(options.method, url)\n\n        var _this = this;\n        var sendRequest = function(){\n            if(_this._authData.access_token){\n                xhr.setRequestHeader(\"Authorization\", \"Bearer \"+_this._authData.access_token);\n            }\n            xhr.send(options.data);\n            xhr.onreadystatechange = function(event){\n                if(xhr.readyState === 4){\n                    callback(xhr);\n                }\n            }\n        }\n\n        if (options.requireAuthentication && !this.isAuthenticated()){\n            this.addEventListener(\"authenticate\", sendRequest)\n            this.authenticate()\n        }else{\n            sendRequest();\n        }\n    },\n\n    // API methods\n\n    getUser: function(user_id, callback){\n        this.request(\"/users/\"+user_id, callback);\n    }\n}\n\n\nmodule.exports = merge(PodatoAPI, new EventEmitter());","var utils = {\n    encodeQueryString: function(obj){\n        var pairs = [];\n        for(var key in obj){\n            if(obj.hasOwnProperty(key) && obj[key] !== void(0)) {\n                pairs.push(key + \"=\" + encodeURIComponent(obj[key]));\n            }\n        }\n        return \"?\" + pairs.join(\"&\");\n    }\n};\n\nmodule.exports = utils;\n"],"sourceRoot":"/source/"}